# 用户设置指南

## 📱 如何访问设置

在主界面右上角，点击 **⚙️ 设置按钮**（齿轮图标）

---

## ⚙️ 可配置参数

### 1. 合并阈值 (ΔE₀₀)

**作用**：控制颜色合并的严格程度

**范围**：5.0 - 25.0

**默认值**：12.0

#### ΔE₀₀ 值含义对照表

| 阈值 | 效果 | 适用场景 |
|------|------|---------|
| **5-8** | 非常严格 | 需要区分细微色差（如设计师调色板）|
| **8-12** | 严格 | 保留更多颜色变化 |
| **12-16** | 适中（推荐）| 平衡分类，适合大多数场景 |
| **16-20** | 宽松 | 简化分类，合并相近颜色 |
| **20-25** | 非常宽松 | 极简分类，只保留主要色系 |

#### 实际例子

**阈值 = 8**：
- 浅蓝 ✅
- 天蓝 ✅
- 中蓝 ✅
- 深蓝 ✅
→ 4个簇

**阈值 = 15**：
- 浅蓝 + 天蓝 → 浅蓝系 ✅
- 中蓝 + 深蓝 → 深蓝系 ✅
→ 2个簇

**阈值 = 22**：
- 所有蓝色 → 蓝色系 ✅
→ 1个簇

---

### 2. 最小簇大小

**作用**：照片数少于此值的簇会被删除

**选项**：
- **1 张**：保留所有簇（包括单张照片）
- **2 张**（推荐）：删除单张照片的簇
- **3 张**：删除少于3张的簇
- **5 张**：只保留有足够代表性的簇

**默认值**：2

#### 选择建议

| 照片总数 | 推荐值 | 原因 |
|---------|--------|------|
| < 10张 | 1 | 避免过度删除 |
| 10-50张 | 2 | 平衡保留与删除 |
| 50-100张 | 2-3 | 去除噪声 |
| > 100张 | 3 | 只保留主要簇 |

---

### 3. 颜色名称相似性

**作用**：在合并时检查颜色名称是否相似

**选项**：
- **开启**（推荐）：只合并名称相似的簇
- **关闭**：仅根据色差合并

**默认值**：开启

#### 效果对比

**开启时**：
- DarkBlue (ΔE=10) + LightBlue → ✅ 合并（都包含"Blue"）
- Blue (ΔE=10) + Purple → ❌ 不合并（名称不同）

**关闭时**：
- DarkBlue (ΔE=10) + LightBlue → ✅ 合并
- Blue (ΔE=10) + Purple → ✅ 合并（仅看色差）

#### 何时关闭？

- 想要更激进的合并
- 颜色命名不准确时
- 测试不同分类策略时

---

## 🎯 预设配置

### 精细分类（更多簇）

```
合并阈值: 8.0
最小簇大小: 1
名称相似性: 关闭
```

**适用场景**：
- 需要区分细微色差
- 设计师/摄影师专业用途
- 照片色彩丰富多样

**效果**：更多簇，更细致的分类

---

### 平衡分类（推荐）

```
合并阈值: 12.0
最小簇大小: 2
名称相似性: 开启
```

**适用场景**：
- 日常使用
- 大多数照片集
- 平衡细节与简洁

**效果**：适中数量的簇，合理分类

---

### 简洁分类（更少簇）

```
合并阈值: 18.0
最小簇大小: 3
名称相似性: 开启
```

**适用场景**：
- 快速浏览
- 照片色彩单调
- 只关注主要色系

**效果**：少量簇，简化分类

---

## 💡 使用技巧

### 技巧1：先用默认，再调整

1. 第一次分析使用默认配置
2. 查看结果
3. 如果簇太多 → 增加合并阈值
4. 如果簇太少 → 减少合并阈值

### 技巧2：根据照片数量调整

| 照片数量 | 推荐配置 |
|---------|---------|
| < 10张 | 精细分类 |
| 10-50张 | 平衡分类 |
| > 50张 | 平衡或简洁 |

### 技巧3：特殊场景

**场景：旅行照片（色彩丰富）**
```
合并阈值: 10.0
最小簇大小: 2
名称相似性: 开启
```

**场景：建筑照片（色彩单调）**
```
合并阈值: 15.0
最小簇大小: 3
名称相似性: 开启
```

**场景：花卉照片（需要细分）**
```
合并阈值: 8.0
最小簇大小: 1
名称相似性: 关闭
```

---

## 🔍 查看当前配置

设置界面底部会显示：
```
当前配置：
合并阈值: 12.0 • 名称相似性: 开启 • 最小簇大小: 2
```

或者查看控制台输出：
```
📊 自适应聚类配置:
   - 合并阈值 ΔE: 12.0
   - 最小簇大小: 2
   - 名称相似性: 开启
```

---

## ❓ 常见问题

### Q: 为什么我的照片只分成了1个簇？

**可能原因**：
1. 合并阈值太大（> 20）
2. 照片色彩确实很单调
3. 最小簇大小太大，删除了其他簇

**解决方案**：
- 降低合并阈值到 8-10
- 设置最小簇大小为 1
- 关闭名称相似性

### Q: 为什么有很多只有1-2张照片的簇？

**可能原因**：
1. 合并阈值太小（< 8）
2. 最小簇大小设为 1
3. 照片色彩差异很大

**解决方案**：
- 增加合并阈值到 15-18
- 设置最小簇大小为 3
- 开启名称相似性

### Q: 设置会保存吗？

**是的**！你的设置会在应用重启后保留。

### Q: 如何恢复默认设置？

点击设置界面底部的 **"重置所有设置"** 按钮。

---

## 📊 进阶：理解 ΔE₀₀

### 什么是 ΔE₀₀？

CIEDE2000 色差公式（ΔE₀₀）是国际照明委员会（CIE）制定的标准，用于量化两种颜色之间的感知差异。

### 为什么不用 RGB 距离？

RGB 距离不符合人眼感知：
- RGB: (255,0,0) 和 (200,0,0) 距离 = 55
- RGB: (0,255,0) 和 (0,200,0) 距离 = 55

但人眼对红色的敏感度与绿色不同！

ΔE₀₀ 考虑了：
- 亮度差异
- 色度差异
- 色相差异
- 人眼对不同颜色区域的敏感度差异

### 实际测量

你可以在控制台看到：
```
📊 Cluster 0:
   LAB: L=70.5, a=-10.2, b=-25.3
   Name: SkyBlue

📊 Cluster 1:
   LAB: L=45.2, a=-8.5, b=-22.1
   Name: DarkBlue

ΔE₀₀ = 26.8 → 不合并（> 12.0）
```

---

**祝你使用愉快！🎨**

